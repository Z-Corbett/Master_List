!function(e,n,t,i){var s={init:function(e,t){return this.options=n.extend({},this.options,e),this.elem=t,this.$elem=n(t),this.$viewer=this.$elem.find(".carousel-viewport"),this.$positioner=this.$elem.find(".carousel-slides"),this.$slides=this.$positioner.find(".carousel-slide"),this.$imgs=this.$elem.find(".contentImg"),this.$nav=this.$elem.find(".carousel-nav"),this._slideCount=this.$slides.length,this._lastSlideIndex=this._slideCount-1,this._width=this.$viewer.width(),this._currentSlide=0,this._hasPagination=0<this.$elem.closest(".hasPagination").length,this.options.animationLoop=!this._hasPagination,"0"!==this.$slides.first().attr("data-slide-index")&&this._setIndices(),this._swipe={startX:0,startY:0,dx:0,scrolling:!1},this._getSlidesWidth(),this._bindHandlers(),this._goTo(0),this._setNavAttr(),this.$elem.trigger("scCarouselInit",[this]),this},options:{animationLoop:!0},_eventNamespace:".carousel",_bindHandlers:function(){var i=this;this.$nav.on("click"+this._eventNamespace,{context:this},this._navClicked),this.$slides.on("click"+this._eventNamespace,{context:this},this._slideClicked),this.$positioner.on("scDeferredImagesLoaded"+this._eventNamespace,function(){i._getSlidesWidth(),i.$positioner.off("scDeferredImagesLoaded")}),this.$positioner.hasClass("imagesLoaded")&&this._getSlidesWidth(),"ontouchstart"in document.documentElement&&this.$elem.on("touchstart"+this._eventNamespace,{context:this},this._onTouchStart),n(document).bind("keyup",function(e){var t=e.keyCode;37===t?i.$elem.find(".carousel-nav--prev").click():39===t&&i.$elem.find(".carousel-nav--next").click()}),n(e).on("resize"+this._eventNamespace,n.debounce(250,function(){i.refresh()}))},_navClicked:function(e){var t=e.data.context,i="next",s=n(e.currentTarget).hasClass("carousel-nav--prev");e.preventDefault(),n(e.currentTarget).hasClass("disabled--vis")||(t.$elem.trigger("scCarouselBefore",[t]),s?(i="prev",t._currentSlide--):t._currentSlide++,t._normalizeIndex(),t._goTo(t._currentSlide,i),t._setNavAttr())},_setNavAttr:function(){this.options.animationLoop||(0===this._currentSlide?this.$elem.find(".carousel-nav--prev").addClass("disabled--vis",!0):this._currentSlide===this._lastSlideIndex?this.$elem.find(".carousel-nav--next").addClass("disabled--vis",!0):this.$nav.removeClass("disabled--vis",!1))},_normalizeIndex:function(){this._currentSlide<0?this._currentSlide=this._lastSlideIndex:this._currentSlide>this._lastSlideIndex&&(this._currentSlide=0)},_slideClicked:function(e){var t,i=e.data.context;0===n(e.currentTarget).find("a").length&&(t=parseInt(n(e.currentTarget).attr("data-slide-index"),10),i._currentSlide!==t?i._currentSlide=t:(i._currentSlide++,i._normalizeIndex()),i._goTo(i._currentSlide,"next"))},currentSlide:function(){return this._currentSlide},_setPosition:function(e){t.csstransforms?this.$positioner.css("transform","translateX("+e+"px)"):this.$positioner.css("margin-left",e+"px")},_goTo:function(e,t){this._hasPagination&&this._getSlidesWidth();var i=this.$slides.filter('[data-slide-index="'+e+'"]'),s=0===e,n=e===this._lastSlideIndex,a=i.outerWidth(!0),o=i.position().left,r=this.$elem.width(),d=0,l=this._slidesWidth-r;if(a<r&&(s||n)?n&&(d=-1*l):d=-1*(o-r/2+a/2),0<d){if("prev"===t)this._currentSlide=0;else{if(n)return;this._currentSlide++}return this._goTo(this._currentSlide,t)}if(Math.abs(d)>l){if("next"===t)this._currentSlide=this._lastSlideIndex;else{if(s)return;this._currentSlide--}return this._goTo(this._currentSlide,t)}this._setPosition(d),this.$elem.trigger("scCarouselNavigatedTo",[this])},goTo:function(e){if(0<=e&&e<this._slideCount){var t=e<this._currentSlide?"prev":"next";this._currentSlide=e,this._goTo(this._currentSlide,t)}},replacedImage:function(){this._getSlidesWidth(),this._goTo(this._currentSlide)},_getSlidesWidth:function(){var i=0;this.$slides.each(function(e,t){i+=n(t).outerWidth(!0)}),this._slidesWidth=i,this._updateNav()},_updateNav:function(){this._slidesWidth<=this.$elem.width()||1===this._slideCount?this.$nav.addClass("disabled"):this.$nav.removeClass("disabled")},updateNav:function(){this._updateNav()},refresh:function(){this._getSlidesWidth(),this._goTo(this._currentSlide),this._setNavAttr()},_onTouchStart:function(e){var t=e.data.context;1===e.originalEvent.touches.length&&(t._swipe.startX=e.originalEvent.touches[0].pageX,t._swipe.startY=e.originalEvent.touches[0].pageY,t.$elem.on("touchmove"+t._eventNamespace,{context:t},t._onTouchMove),t.$elem.on("touchend"+t._eventNamespace,{context:t},t._onTouchEnd))},_onTouchMove:function(e){var t=e.data.context;t._swipe.dx=t._swipe.startX-e.originalEvent.touches[0].pageX,t._swipe.scrolling=Math.abs(t._swipe.dx)<Math.abs(e.originalEvent.touches[0].pageY-t._swipe.startY),t._swipe.scrolling||e.preventDefault()},_onTouchEnd:function(e){var t=e.data.context;if(t._swipe.dx&&50<Math.abs(t._swipe.dx)){var i=0<t._swipe.dx?".carousel-nav--next":".carousel-nav--prev";t.$nav.filter(i).trigger("click"),e.preventDefault(),e.stopPropagation()}t.$elem.off("touchmove"+t._eventNamespace),t.$elem.off("touchmove"+t._eventNamespace),t._swipe.startX=null,t._swipe.startY=null,t._swipe.dx=null},_unbindHandlers:function(){this.$elem.off(this._eventNamespace),this.$nav.off(this._eventNamespace),this.$slides.off(this._eventNamespace),n(e).off(this._eventNamespace)},_setIndices:function(){this.$slides.each(function(e,t){t.setAttribute("data-slide-index",e)})},_update:function(){this.$slides=this.$positioner.find(".carousel-slide"),this._setIndices(),this.$imgs=this.$elem.find(".contentImg"),this._slideCount=this.$slides.length,this._lastSlideIndex=this._slideCount-1,this.refresh()},addSlide:function(e){var t=n(e);this.$positioner.append(t),this.$slides=this.$positioner.find(".carousel-slide"),this.$imgs=this.$elem.find(".contentImg").addClass("visible"),this._slideCount=this.$slides.length,this._lastSlideIndex=this._slideCount-1,this._unbindHandlers(),this._setIndices(),this.refresh(),this._bindHandlers()},afterInsertSlide:function(e){this._update(),this.goTo(e)},afterRemoveSlide:function(){this._update()},afterReorder:function(e){this._update(),this.goTo(e)},previous:function(){this.$nav.filter(".carousel-nav--prev").click()},next:function(){this.$nav.filter(".carousel-nav--next").click()},destroy:function(){this._unbindHandlers()}};n.plugin("scCarousel",s),n(document).ready(function(){n(".carousel").scCarousel()})}(this,jQuery,Modernizr);